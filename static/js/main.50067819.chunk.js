(this["webpackJsonpasus-merlin-simple-vpn-client-setup-ui"]=this["webpackJsonpasus-merlin-simple-vpn-client-setup-ui"]||[]).push([[0],{10:function(e,t,n){e.exports=n(17)},15:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(6),i=n.n(c),u=(n(15),n(1)),l=n(3),s=n(2),o=n.n(s),p=n(7),d=n(8),m=n(19),f=n(4),E=n.n(f),N=function(){return new Promise((function(e){return setTimeout(e,2e3)}))},v=new(function(){function e(){Object(p.a)(this,e)}return Object(d.a)(e,[{key:"getVPNClients",value:function(){return o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.awrap(N());case 2:return e.abrupt("return",E.a.vpnClients);case 3:case"end":return e.stop()}}))}},{key:"activateVPNClient",value:function(e){var t;return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.a.awrap(N());case 2:return t=E.a.vpnClients.find((function(t){return t.id===e})),n.abrupt("return",Object(u.a)({},t,{state:"CONNECTED"}));case 4:case"end":return n.stop()}}))}},{key:"deactivateVPNClient",value:function(e){var t;return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.a.awrap(N());case 2:return t=E.a.vpnClients.find((function(t){return t.id===e})),n.abrupt("return",Object(u.a)({},t,{state:"DISCONNECTED"}));case 4:case"end":return n.stop()}}))}},{key:"getRouterIP",value:function(){return o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.awrap(N());case 2:return e.abrupt("return",E.a.routerIpAddress);case 3:case"end":return e.stop()}}))}},{key:"getServerIP",value:function(){return o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.awrap(N());case 2:return e.abrupt("return",E.a.serverIpAddress);case 3:case"end":return e.stop()}}))}},{key:"getClientIP",value:function(){return o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://ipv4.ipleak.net/json").then((function(e){return e.json()})).then((function(e){return e.ip})));case 1:case"end":return e.stop()}}))}},{key:"getClientDNS",value:function(){var e,t,n;return o.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:e={},t=function(t){var n,a;return o.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(m.a)().replace(/-/g,""),a=(new Date).getTime(),t.next=4,o.a.awrap(Promise.all([1,2,3,4,5].map((function(t){var r=t.toString().repeat(8),c="https://".concat(r).concat(n,".ipleak.net/dnsdetect/?_=").concat(a);return fetch(c).then((function(e){return e.text()})).then((function(t){return e[t]=!0}))}))));case 4:case"end":return t.stop()}}))},n=0;case 3:if(!(n<5)){a.next=9;break}return a.next=6,o.a.awrap(t(n));case 6:n++,a.next=3;break;case 9:return a.abrupt("return",Object.keys(e));case 10:case"end":return a.stop()}}))}}]),e}()),O=function(){return!0},I={},b={},C={},y=function(e,t){return function(n){var a=I[t]||{},r=Object(u.a)({},a),c=e?e(r,n):Object(u.a)({},r,{},n);I[t]=c,C[t].forEach(function(e,t){return function(n){var a=n||{},r=a.render,c=a.shouldUpdate;(c&&c.current||O)(e,t)&&r()}}(r,c))}},h=function(e){var t=Object(a.useReducer)((function(e){return!e}),!0),n=Object(l.a)(t,2)[1],r=e||{},c=r.initialState,i=r.shouldUpdate,u=r.reducer,s=(e||{}).stateRootId||"root",o=function(e){var t=Object(a.useRef)(e);return Object(a.useEffect)((function(){t.current=e}),[e]),t}(i),p=Object(a.useMemo)((function(){return y(u,s)}),[u,s]);return C[s]||(C[s]=[]),!b[s]&&c&&(b[s]=!0,y(void 0,s)(c)),Object(a.useEffect)((function(){var e={render:n,shouldUpdate:o};return C[s].push(e),function(){C[s].splice(C[s].indexOf(e),1)}}),[o,s]),[I[s],p]},j={type:"ON_CLIENTS_LOAD_START"},g={type:"ON_CLIENTS_LOAD_SUCCESS"},T={type:"ON_CLIENTS_LOAD_FAILURE"},S={type:"ON_CLIENT_ACTIVATION_START"},_={type:"ON_CLIENT_ACTIVATION_SUCCESS"},A={type:"ON_CLIENT_ACTIVATION_FAILURE"},D={type:"ON_CLIENT_DEACTIVATION_START"},L={type:"ON_CLIENT_DEACTIVATION_SUCCESS"},w={type:"ON_CLIENT_DEACTIVATION_FAILURE"},P={type:"ON_IP_INFO_LOAD_START"},x={type:"ON_IP_INFO_LOAD_SUCCESS"},k={type:"ON_IP_INFO_LOAD_FAILURE"},V={ipInfo:null,isLoading:!1,error:null};function R(e,t){switch(t.type){case P.type:return Object(u.a)({},e,{isLoading:!0});case x.type:var n=t.ipInfo;return Object(u.a)({},e,{ipInfo:n,isLoading:!1});case k.type:var a=t.error;return Object(u.a)({},e,{error:a,isLoading:!1});default:return e}}var F="ip-and-dns-info",U=function(){var e=function(){var e=h({stateRootId:"routerIpInfo",reducer:R,initialState:V}),t=Object(l.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){r(P),v.getRouterIP().then((function(e){return r(Object(u.a)({},x,{ipInfo:e}))})).catch((function(e){return r(Object(u.a)({},k,{error:e}))}))}),[r]),n}(),t=e.ipInfo,n=e.isLoading,c=e.error;return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"".concat(F,"-name")},"Router:"),r.a.createElement(B,{ipInfo:t,isLoading:n,error:c}))},W=function(){var e=function(){var e=h({stateRootId:"serverIpInfo",reducer:R,initialState:V}),t=Object(l.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){r(P),v.getServerIP().then((function(e){return r(Object(u.a)({},x,{ipInfo:e}))})).catch((function(e){return r(Object(u.a)({},k,{error:e}))}))}),[r]),n}(),t=e.ipInfo,n=e.isLoading,c=e.error;return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"".concat(F,"-name")},"Server:"),r.a.createElement(B,{ipInfo:t,isLoading:n,error:c}))},G=function(){var e=function(){var e=h({stateRootId:"clientIpInfo",reducer:R,initialState:V}),t=Object(l.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){r(P),Promise.all([v.getClientIP(),v.getClientDNS()]).then((function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1];return r(Object(u.a)({},x,{ipInfo:{ip:n,dns:a}}))})).catch((function(e){return r(Object(u.a)({},k,{error:e}))}))}),[r]),n}(),t=e.ipInfo,n=e.isLoading,c=e.error;return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"".concat(F,"-name")},"Client:"),r.a.createElement(B,{ipInfo:t,isLoading:n,error:c}))},B=function(e){var t=e.isLoading,n=e.error,a=e.ipInfo;if(t)return r.a.createElement("p",{className:"".concat(F,"--loading")},"Loading...");if(n)return r.a.createElement("p",{className:"".concat(F,"--error")},"Failure");var c=a||{},i=c.ip,u=c.dns;return r.a.createElement("dl",{className:"".concat(F,"-list")},r.a.createElement("dt",null,"IP"),r.a.createElement("dd",null,i),r.a.createElement("dt",null,"DNS"),r.a.createElement("dd",null,(u||[]).map((function(e,t){return r.a.createElement("div",{key:t},e)}))))},J=function(){return r.a.createElement("section",{className:F},r.a.createElement("header",{className:"".concat(F,"-header")},r.a.createElement("h2",null,"IP and DNS")),r.a.createElement(U,null),r.a.createElement(W,null),r.a.createElement(G,null))},M=n(9),$=n.n(M),q={clients:[],isLoading:!1,error:null};function z(e,t){switch(t.type){case j.type:return Object(u.a)({},e,{isLoading:!0});case g.type:var n=t.clients;return Object(u.a)({},e,{clients:n,isLoading:!1});case T.type:var a=t.error;return Object(u.a)({},e,{error:a,isLoading:!1});case S.type:var r=t.id,c=e.clients.map((function(e){return Object(u.a)({},e,{state:e.id===r?"CONNECTING":e.state})}));return Object(u.a)({},e,{clients:c});case _.type:var i=t.client,l=e.clients.map((function(e){return e.id===i.id?i:e}));return Object(u.a)({},e,{clients:l});case A.type:var s=t.error,o=t.id,p=e.clients.map((function(e){return Object(u.a)({},e,{error:e.id===o?s:e.error})}));return Object(u.a)({},e,{clients:p});case D.type:var d=t.id,m=e.clients.map((function(e){return Object(u.a)({},e,{state:e.id===d?"DISCONNECTING":e.state})}));return Object(u.a)({},e,{clients:m});case L.type:var f=t.client,E=e.clients.map((function(e){return e.id===f.id?f:e}));return Object(u.a)({},e,{clients:E});case w.type:var N=t.error,v=t.id,O=e.clients.map((function(e){return Object(u.a)({},e,{error:e.id===v?N:e.error})}));return Object(u.a)({},e,{clients:O});default:return e}}var H=function(e){var t=e.id,n=e.name,a=e.state,c=e.clients,i=e.onActivate,u=e.onDeactivate,l="CONNECTED"===a,s="CONNECTING"===a||"DISCONNECTING"===a,o=l?"Deactivate":"Activate",p=l?u:i;return r.a.createElement("li",{key:t,className:"".concat("client-list","-item")},r.a.createElement("span",{className:"".concat("client-list","-item-name")},n),r.a.createElement("span",{className:$()("".concat("client-list","-item-state"),"".concat("client-list","-item-state--").concat(l?"connected":"disconnected"),s&&"".concat("client-list","-item-state--loading"))},a),r.a.createElement("button",{disabled:s,onClick:function(){p(t)},className:"".concat("client-list","-item-toggle")},s?"...":o),r.a.createElement("div",{className:"".concat("client-list","-item-devices")},r.a.createElement("ul",null,c.map(K))))},K=function(e){var t=e.name,n=e.ip,a=e.target,c=e.type;return r.a.createElement("li",{key:n},r.a.createElement("dl",{className:"".concat("client-list","-item-devices-list")},r.a.createElement("dt",null,"Name"),r.a.createElement("dd",null,t),r.a.createElement("dt",null,"IP"),r.a.createElement("dd",null,n),r.a.createElement("dt",null,"Target"),r.a.createElement("dd",null,a),r.a.createElement("dt",null,"Type"),r.a.createElement("dd",null,c)))},Q=function(){var e=function(){var e=h({stateRootId:"vpnClients",reducer:z,initialState:q}),t=Object(l.a)(e,2),n=t[0],r=t[1];Object(a.useEffect)((function(){r(j),v.getVPNClients().then((function(e){return r(Object(u.a)({},g,{clients:e}))})).catch((function(e){return r(Object(u.a)({},T,{error:e}))}))}),[r]);return Object(u.a)({},n,{activateClient:function(e){r(Object(u.a)({},S,{id:e})),v.activateVPNClient(e).then((function(e){return r(Object(u.a)({},_,{client:e}))})).catch((function(t){return r(Object(u.a)({},A,{error:t,id:e}))}))},deactivateClient:function(e){r(Object(u.a)({},D,{id:e})),v.deactivateVPNClient(e).then((function(e){return r(Object(u.a)({},L,{client:e}))})).catch((function(t){return r(Object(u.a)({},w,{error:t,id:e}))}))}})}(),t=e.clients,n=e.isLoading,c=e.error,i=e.activateClient,s=e.deactivateClient;return r.a.createElement("section",{className:"client-list"},r.a.createElement("header",{className:"".concat("client-list","-header")},r.a.createElement("h2",null,"VPN Clients")),n&&r.a.createElement("div",{className:"".concat("client-list","--loading"),role:"alert"},"Loading"),c&&r.a.createElement("div",{className:"".concat("client-list","--error"),role:"alert"},"Error:",r.a.createElement("div",null,c.toString())),r.a.createElement("ul",null,t.map((function(e){return r.a.createElement(H,Object.assign({key:e.id},e,{onActivate:i,onDeactivate:s}))}))))},X=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"app-header"},r.a.createElement("h1",null,"Asus Merlin Simple VPN Client setup")),r.a.createElement("main",{className:"app-content"},r.a.createElement(J,null),r.a.createElement(Q,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(X,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},4:function(e,t){e.exports={vpnClients:[{id:1,name:"Client Number One",state:"DISCONNECTED",clients:[{name:"Device One",ip:"192.168.1.10",target:"0.0.0.0",type:"VPN"}]},{id:2,name:"Client Number Two, Extended Name",state:"DISCONNECTED",clients:[{name:"Device One",ip:"192.168.1.10",target:"0.0.0.0",type:"VPN"}]},{id:3,name:"Third Client",state:"DISCONNECTED",clients:[{name:"Device One",ip:"192.168.1.10",target:"0.0.0.0",type:"VPN"}]},{id:4,name:"Fourth Client, Extended name",state:"CONNECTED",clients:[{name:"Device Number Two",ip:"192.168.1.11",target:"0.0.0.0",type:"VPN"}]},{id:5,name:"Client Number Five",state:"CONNECTED",clients:[{name:"All IPs",ip:"192.168.1.2/24",target:"0.0.0.0",type:"VPN"},{name:"Device number three",ip:"192.168.1.12",target:"0.0.0.0",type:"WAN"},{name:"Device number four",ip:"192.168.1.13",target:"0.0.0.0",type:"WAN"},{name:"Device number five",ip:"192.168.1.14",target:"0.0.0.0",type:"WAN"}]}],serverIpAddress:{ip:"11.11.111.111",dns:["22.22.222.222","33.33.333.333"]},routerIpAddress:{ip:"44.44.444.444",dns:["55.55.555.555","66.66.666.666"]}}}},[[10,1,2]]]);
//# sourceMappingURL=main.50067819.chunk.js.map